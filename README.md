





覆膜生产管理系统
Solution for cutting piece verification and scanning system 








版本号：V1.0
最后更新时间：2025-04-11 
目录
目录
1. 需求清单	3
2. 物料维护	5
3. 生产汇报单	12
4. 中包装标签打印	14
5. 复打内盒标签	15
6. 销售出库单	16
6.1 出库单列表	16
6.2 金蝶获取出库单	17
6.3 打印外箱标签	17
6.4 删除外箱标签	18
7. 标签打印日志	18
8. 箱号打印日志	19
9. 用户管理	20

 
1. 需求清单

下述需求清单实现的功能为项目验收唯一标准，符合技术标准并且完成清单中的开发功能即代表项目完成，请仔细核对及确认功能清单。

开发技术描述：

系统应基于多层架构设计，包含PDA端、PC端和API服务端。PDA端使用C#开发，PC端使用WinForm技术，API服务端使用ASP.NET Core Web API，数据库使用SQL SERVER。。
URS ID	需求清单 Requirement Description
1	系统中无论PC端还是PDA 端，都无需登录即可操作
2	物料维护管理，配置系统中的物料信息，包含面料ERP号、面料零件描述、刀模号、装箱数量、成品ERP号、成品零件描述
5	物料信息中的面料ERP号和成品ERP号一一对应，不存在一对多和多对一的关系
6	PDA工序1-覆膜：扫描外包装二维码，识别二维码中的ERP号，加载覆膜打印界面
7	覆膜界面自动显示批次、描述、客户零件、备注字段，所有信息通过ERP号码从物料信息中获取
8	用户录入数量后点击打印，调用连接的标签打印机执行打印功能
9	PDA工序2-上料：下拉框选择维护好的物料信息中已有的产品ERP号
10	扫描刀模二维码，识别二维码中的ERP号码，与已选产品ERP号进行一致性校验
11	依次扫描工序1打印的面料覆膜二维码，解析面料ERP号，判断是否与选择的产品一致
12	依次扫描另3卷面料二维码，判断是否超出物料中ERP号设置的数量
13	点击上料成功按钮，系统记录上料的日志记录
14	PC端工序3-下料：选择未操作过的上料记录
15	按物料中的装箱数量校验上料数量
16	打印箱号标签（标签和外箱标签样式相同）
17	PC端-覆膜记录列表：记录覆膜并打印的覆膜记录
18	PC端-上料记录：记录上料成功的记录
19	PC端-下料记录：记录下料成功的记录
20	系统分为PC端、PDA端、API端3个平台，支持联网使用

 
2. 物料维护
2.1 物料大类维护
可维护物料的大类名称，新增、删除，增加时重复名称无法重复添加，类型名称长度不超过20个字符，删除时如果大类下有小类，则无法删除，需先删除其下的所有小类信息，再删除大类信息。
 
 
 
2.2 产品小类维护
	小类列表维护：
列表显示所有产品大类小类，可通过系统新增、编辑、删除，左侧为大类搜索结构，点击后可直接筛选小类列表中的数据，也可以通过上面的“小类名称” 文本框进行关键词筛选。
 
小类列表展示：产品大类、产品小类、保质期（年）、包装数、备注。
	小类新增：
可维护常规属性、自定义属性维护、内包装标签维护、中盒标签、外箱标签
 
	常规属性包含下述信息：
字段名称	必填	输入类型	长度限制（最大）	描述
所属大类	Y	下拉框		引用大类中数据
小类名称	Y	文本框	20个字符	字符串
保质期	Y	文本框	100	数值
包装数量	Y	文本框	100	数值
备注	N	文本框	1000	文本描述

	自定义属性维护包含下述信息：
字段名称	必填	输入类型	长度限制（最大）	描述
属性名称	Y	文本框	50个字符	字符串
默认值	N	文本框		字符串
 
自定义属性添加后可以选中列表属性行，点击“删除”按钮进行删除操作，确认后删除，删除时验证小类下是否有物料信息，如果存在物料信息则无法删除。
自定义属性列表展示已添加的属性信息。

	内包装标签/中盒标签/外箱标签
包含标签模板上传及属性绑定2个功能，3个标签的配置及功能一样，仅数据和文件不同。
 
标签模版上传：上传模板文件格式仅限btw格式文件，上传成功后控件下方展示上传成功的模板文件名称，并且自动读取模板中的标签属性填充到内包装标签属性列表中。
标签属性绑定：用户点击内包装标签属性中值后，如果之前配置过，则自动带出已配置的系统属性及日期格式，如果未配置过可以切换进行配置。
数据来源特别说明
内包装标签属性-》数据来源（标签模板读取）
匹配系统属性-》数据来源（自定义属性列表）

	Excel导入小类
选择大类后，上传Excel文件即可导入小类模板
 
Excel模板包含下述列信息，第一行为属性行，第二行为默认值
列名称	必填	类型	长度限制（最大）	描述
所属大类	Y	文本	100个字符	字符串
小类名称	Y	文本	100个字符	字符串
保质期	Y	文本	100个字符	字符串
包装数量	Y	文本	100个字符	字符串
备注	N	文本	1000个字符	文本描述
扩展1	N	文本	100个字符	字符串
扩展2	N	文本	100个字符	字符串
扩展3	N	文本	100个字符	字符串
等等				
备注：Excel上传完小类信息后，还需对小类的标签模板进行上传及配置。
 
2.3 产品物料维护
	产品物料列表
产品物料可通过系统添加及Excel导入2种方式增加，列表界面如下，左侧为大类和小类的树形搜索条件，点击大类时，列表展示大类下的所有物料信息，点击小类时，列表展示小类下的所有物料信息，还可以通过左上角的产品编号、产品名称进行进一步搜索。
 
产品物料列表包含：产品大类、产品小类、产品编号、产品名称、产品描述、规格型号、商品码、保质期、包装数、批/序列号
	产品物料删除
删除时需选中列表中的某行物料信息，弹出确认删除提示，确认后进行删除，如果物料已经打印了条码信息，则无法进行删除。
	产品物料新增
物料新增时需维护物料的常规属性、自定义属性、内包装标签、中盒标签、外箱标签
 



常规属性包含下述信息
字段名称	必填	输入类型	长度限制（最大）	描述
所属大类	Y	下拉框		引用大类中数据
产品小类	Y	下拉框		引用小类数据和大类关联
产品编号	Y	文本框	100个字符	文本输入
产品名称	Y	文本框	100个字符	文本输入
产品描述	Y	文本框	1000个字符	文本输入
型号规格	Y	文本框	100个字符	文本输入
商品码	Y	文本框	100个字符	文本输入
保质期	Y	文本框	自动填充	引用小类配置数据
包装数量	Y	文本框	自动填充	引用小类配置数据
可追溯性	Y	下拉框		批次号/序列号 2选一
备注	N	文本框	1000个字符	文本输入
				

	自定义属性
自定义属性列表引用自小类配置的自定义属性，在物料信息中无法修改
 

	内包装标签/中盒标签/外箱标签
各个标签的配置属性引用自小类中的配置，在物料信息中无法修改，可切换查看。
 
	Excel 导入物料
选择所属大类、产品小类后上传Excel文件进行导入，导入时每个小类需单独导入。
 
 
Excel导入模板中包含的列有
列名称	必填	类型	长度限制（最大）	描述
产品大类	Y	文本	100个字符	字符串
产品小类	Y	文本	100个字符	字符串
产品编号	Y	文本	100个字符	字符串
产品名称	Y	文本	100个字符	字符串
产品描述	Y	文本	100个字符	字符串
规格型号	Y	文本	100个字符	字符串
商品码	Y	文本	100个字符	字符串
保质期（年）	Y	文本	100个字符	数值
包装数	Y	文本	100个字符	数值
批/序列号	Y	文本	100个字符	批次号/序列号 2选一
扩展1	N	文本	100个字符	字符串
扩展2	N	文本	100个字符	字符串
扩展3	N	文本	100个字符	字符串
等等				

 
3. 生产汇报单
3.1 生产汇报单列表
列表展示从金蝶同步到的订单信息及打印状态
 
列表展示字段包含：订单编号/物料编号/规格型号/物料名称/批号/生产日期/失效日期/内盒已打/中包装已打/状态/制单日期

3.2 从金蝶同步生产汇报单
通过输入订单编号对接金蝶软件API，获取订单信息，根据订单信息中的物料编码，到物料列表中匹配物料信息，匹配成功后引用模板及补充属性，输入打印数量，点击“保存订单并打印”可以直接进行批量打印。
 
金蝶软件API地址：
API 返回的信息有：客户名称、订单日期、物料编码、
页面信息来源及关系如下
字段名称	来源	类型	描述
客户名称	API 同步	文本	
订单日期	API 同步	文本	
物料编码	API 同步	文本	
物料名称	物料库匹配	文本	
规格型号	物料库匹配	文本	
商品条码	物料库匹配	文本	
生产日期	当前日期	文本	当前日期
失效日期	自动计算	文本	根据物料库保质期+生产日期自动计算
批号	API 同步	文本	
订单数量	API 同步	文本	
打印数量	文本输入	文本	文本输入本次打印的数量
已打印	自动计算	文本	每成功打印一张则数量加1,打印数量等于订单数量时，自动修改订单打印状态为已完成?
标签模版	物料库匹配	文本	
制单日期	当前日期	文本	
追溯方式	物料库匹配	文本	如果为批次号则日期只记录打印数量，如果为序列号则自动生成序列号，序列号生成规则为?
标签模版	物料库匹配	文本	显示文件名称并在右侧显示预览图
补充属性	物料库匹配	列表	

3.3 打印内盒标签
针对已获取的订单，选中后点击“打印内盒标签”可弹出内盒标签打印界面继续打印
 

3.4 删除生产汇报单
根据订单的状态来判断是否可以删除，已经完成的订单无法执行删除，进行中的订单弹出确认提示，确认后执行删除，删除成功后批号对应的序列号将重新计算

3.5 订单完工
选中订单信息后点击订单完工，可以强制修改订单打印状态为已完成（已打数量是否要强制赋值订单数量？）。
 

4. 中包装标签打印
使用扫描枪扫描内盒标签后，根据内盒标签信息自动匹配生成中包装二维码。
 
内盒二维码是序列号值还是批号值？
根据二维码编号获取的信息见下述内容
字段名称	来源	类型	描述
客户名称	内盒打印日志中获取	文本	
订单日期	内盒打印日志中获取	文本	
物料编码	内盒打印日志中获取	文本	
物料名称	内盒打印日志中获取	文本	
规格型号	内盒打印日志中获取	文本	
商品条码	内盒打印日志中获取	文本	
生产日期	内盒打印日志中获取	文本	当前日期
失效日期	内盒打印日志中获取	文本	根据物料库保质期+生产日期自动计算
批号	内盒打印日志中获取	文本	
序列号	内盒打印日志中获取	文本	
标签模版	内盒打印日志中获取	文本	
制单日期	内盒打印日志中获取	文本	
标签模版	内盒打印日志中获取	文本	显示文件名称并在右侧显示预览图
补充属性	内盒打印日志中获取	列表	

5. 复打内盒标签
使用扫描枪扫描内盒标签后，根据内盒标签信息自动匹配生成内盒二维码进行重新打印。
 
根据二维码编号获取的信息见下述内容
字段名称	来源	类型	描述
客户名称	内盒打印日志中获取	文本	
订单日期	内盒打印日志中获取	文本	
物料编码	内盒打印日志中获取	文本	
物料名称	内盒打印日志中获取	文本	
规格型号	内盒打印日志中获取	文本	
商品条码	内盒打印日志中获取	文本	
生产日期	内盒打印日志中获取	文本	当前日期
失效日期	内盒打印日志中获取	文本	根据物料库保质期+生产日期自动计算
批号	内盒打印日志中获取	文本	
序列号	内盒打印日志中获取	文本	
标签模版	内盒打印日志中获取	文本	
制单日期	内盒打印日志中获取	文本	
标签模版	内盒打印日志中获取	文本	显示文件名称并在右侧显示预览图
补充属性	内盒打印日志中获取	列表	

6. 销售出库单
6.1 出库单列表
列表显示已获取的出库单数据，显示出库单的装箱状态及最后装箱日期。
 
出库单列表显示:订单编号、订单日期、客户名称、装箱状态、总箱数、已装箱数、装箱日期
 
6.2 金蝶获取出库单
根据订单编号对接金蝶系统获取出库单信息
 
API 的地址为：？ ，对接信息？
获取的订单包含客户名称、订单日期、订单清单（清单包含物料编码、物料名称、数量、批号），点击保存订单后，根据订单清单中物料编码到物料库中匹配所属物料的装箱数量，逐一判断清单中每个物料的装箱数量，累计后计算出订单的总装箱数量

6.3 打印外箱标签
获取订单成功后可以进入出货装箱界面，用户通过扫码装箱来自动生成箱号标签。
 
自动满箱：用户勾选“同类物料满箱自动打印标签”选项后，在扫码装箱时，如果扫码数量达到装箱标准后，自动满箱打印箱号标签，并清空当前装箱清单切换下一箱。
手工满箱：用户点击按钮“手工满箱打印标签”按钮后，自动满箱打印箱号标签，并清空当前装箱清单切换下一箱。
重置本箱：点击后，清空当前的装箱清单。
调整箱号：点击后弹出修改装箱数量界面，可输入新的装箱数，开始打印后不能修改。
装箱标准如下：
a)	不属于本订单的物料无法装箱，并报警
b)	不需要记录出货批次信息
c)	不同小类的产品不能混装

6.4 删除外箱标签
选中出货单后点击删除按钮可以弹出确认提示进行删除，确认后删除，装箱完成的出货单无法删除？

7. 标签打印日志
列表显示内包装及中包装打印日志
 
列表显示的信息包含：订单编号、物料编号、打印类型、规格型号、物料名称、批号、序列号、打印数量、打印日期、操作人。
补打标签：如果补打的标签含序列号则直接打印，如果不含序列号，则弹出打印界面输入打印数量进行打印。
 

8. 箱号打印日志
列表显示已打印的出库单清单
 
列表显示包含：订单编号、订单日期、客户名称、装箱状态、总箱数、最新箱号、装箱日期
补打标签
选中行点击补打标签弹出所选行箱号的内容，在弹出界面中可进行补打
 

9. 用户管理
	用户列表
列表展示系统的用户信息，显示内容有：登录账号、用户名称、角色、状态
 
	用户新增
创建用户账号
 

录入的信息如下
列名称	必填	类型	描述
登录账号	Y	文本框	字母或数字
用户名称	Y	文本框	
用户角色	Y	下拉框	角色权限：1、管理员：有所有功能，2、资产维护：负责产品资料和标签模版维护，3、操作员：打印生产标签、销售出库箱标签。
用户密码	Y	密码框	长度6位及以上密码，必须包含字母和数字
状态	Y	选择框	可用、不可用，状态为不可用时无法登录

